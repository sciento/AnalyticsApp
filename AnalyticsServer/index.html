<!DOCTYPE html>
<html>
<head>
    <title>API</title>
	<meta charset="utf-8" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>

</head>
<body>
    <h1>WebAnalytics API</h1>
    
    <button onClick="Login()">Login</button>
    <button onClick="Logout()">Logout</button>
    <div id="data"></div>
<script>
         function Login() {

             var authRequest = {
                 username: "TestUser",
                 password: "test"
                 
             };

             $.ajax({
                 type: "POST",
                 url: "http://localhost:37491/auth/",
                 data: JSON.stringify(authRequest),
                 contentType: "application/json; charset=utf-8",
                 processData: true,
                 success: function (data, status, jqXHR) {
                        location.reload();
                 },
                 error: function (xhr, status, test) {
                     
                 }
             });
         }
         
         function Logout(){
             delete_cookie("AuthCookie");
         }
         function delete_cookie(name) {
            document.cookie = name + '=;expires=Thu, 01 Jan 1970 00:00:01 GMT;';
            location.reload();
         };
         
          $.ajax({
                 type: "GET",
                 url: "./users/test",
                 contentType: "application/json; charset=utf-8",
                 processData: true,
                 success: function (data, status, jqXHR) {
                        $("#data").text(JSON.stringify(data));
                 },
                 error: function (xhr, status, test) {
                        $("#data").text(JSON.stringify(xhr.responseJSON));
                 }
             });
         
           
</script>
    
</body>
</html>
